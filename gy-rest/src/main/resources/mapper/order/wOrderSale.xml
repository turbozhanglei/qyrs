<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- 参数管理手工映射SQL语句 -->

<!-- 参数管理手工映射SQL语句 -->
<!-- 发货通知表 -->
<mapper namespace="wOrderSale">

    <sql id="sql_where">
        where
        a.is_delete = 'N'
        <if test="null!=_id  and ''!= _id">
            and a.id = #{_id}
        </if>
        <if test="null!=_order_no  and ''!= _order_no">
            and a.order_no = #{_order_no}
        </if>
        <if test="null!=_order_type  and ''!= _order_type">
            and a.order_type = #{_order_type}
        </if>
        <if test="null!=_provider_id  and ''!= _provider_id">
            and a.provider_id = #{_provider_id}
        </if>
        <if test="null!=_provider_carrier_id  and ''!= _provider_carrier_id">
            and a.provider_carrier_id = #{_provider_carrier_id}
        </if>
        <if test="null!=_provider_owner_id  and ''!= _provider_owner_id">
            and a.provider_owner_id = #{_provider_owner_id}
        </if>
        <if test="null!=_carrier  and ''!= _carrier">
            and a.carrier = #{_carrier}
        </if>
        <if test="null!=_contract_id  and ''!= _contract_id">
            and a.contract_id = #{_contract_id}
        </if>
        <if test="null!=_coma  and ''!= _coma">
            and a.coma = #{_coma}
        </if>
        <if test="null!=_comb  and ''!= _comb">
            and a.comb = #{_comb}
        </if>
        <if test="null!=_priority  and ''!= _priority">
            and a.priority = #{_priority}
        </if>
        <if test="null!=_start_time  and ''!= _start_time">
            and a.start_time = #{_start_time}
        </if>
        <if test="null!=_end_time  and ''!= _end_time">
            and a.end_time = #{_end_time}
        </if>
        <if test="null!=_seller  and ''!= _seller">
            and a.seller = #{_seller}
        </if>
        <if test="null!=_shipping_warehouse_id  and ''!= _shipping_warehouse_id">
            and a.shipping_warehouse_id = #{_shipping_warehouse_id}
        </if>
        <if test="null!=_receive  and ''!= _receive">
            and a.receive = #{_receive}
        </if>
        <if test="null!=_partial_shipments  and ''!= _partial_shipments">
            and a.partial_shipments = #{_partial_shipments}
        </if>
        <if test="null!=_remark  and ''!= _remark">
            and a.remark = #{_remark}
        </if>
        <if test="null!=_status  and ''!= _status">
            and a.status = #{_status}
        </if>
        <if test="null!=startDate  and ''!= startDate">
            and a.create_time >= concat(#{startDate},' ','00:00:00')
        </if>
        <if test="null!=endDate  and ''!= endDate">
            and a.create_time &lt;= concat(#{endDate},' ','23:59:59')
        </if>
        <if test="null!=_creator  and ''!= _creator">
            and a.creator = #{_creator}
        </if>
        <if test="null!=_update_time  and ''!= _update_time">
            and a.update_time = #{_update_time}
        </if>
        <if test="null!=_updator  and ''!= _updator">
            and a.updator = #{_updator}
        </if>

    </sql>

    <!-- 插入 -->
    <insert id="saveInfo" parameterType="map">
        INSERT INTO
        w_order_sale (

        <if test="null!=order_no  and ''!= order_no">
            order_no ,
        </if>
        <if test="null!=order_type  and ''!= order_type">
            order_type ,
        </if>
        <if test="null!=provider_id  and ''!= provider_id">
            provider_id ,
        </if>
        <if test="null!=provider_carrier_id  and ''!= provider_carrier_id">
            provider_carrier_id ,
        </if>
        <if test="null!=provider_owner_id  and ''!= provider_owner_id">
            provider_owner_id ,
        </if>
        <if test="null!=carrier  and ''!= carrier">
            carrier ,
        </if>
        <if test="null!=contract_id  and ''!= contract_id">
            contract_id ,
        </if>
        <if test="null!=coma  and ''!= coma">
            coma ,
        </if>
        <if test="null!=comb  and ''!= comb">
            comb ,
        </if>
        <if test="null!=priority  and ''!= priority">
            priority ,
        </if>
        <if test="null!=start_time  and ''!= start_time">
            start_time ,
        </if>
        <if test="null!=end_time  and ''!= end_time">
            end_time ,
        </if>
        <if test="null!=seller  and ''!= seller">
            seller ,
        </if>
        <if test="null!=shipping_warehouse_id  and ''!= shipping_warehouse_id">
            shipping_warehouse_id ,
        </if>
        <if test="null!=receive  and ''!= receive">
            receive ,
        </if>
        <if test="null!=partial_shipments  and ''!= partial_shipments">
            partial_shipments ,
        </if>
        <if test="null!=remark  and ''!= remark">
            remark ,
        </if>
        <if test="null!=status">
            status ,
        </if>
        <if test="null!=bill_zip  and ''!= bill_zip">
            bill_zip ,
        </if>
        create_time,
        creator,
        update_time,
        updator
        ) VALUES(

        <if test="null!=order_no  and ''!= order_no">
            #{order_no} ,
        </if>
        <if test="null!=order_type  and ''!= order_type">
            #{order_type} ,
        </if>
        <if test="null!=provider_id  and ''!= provider_id">
            #{provider_id} ,
        </if>
        <if test="null!=provider_carrier_id  and ''!= provider_carrier_id">
            #{provider_carrier_id} ,
        </if>
        <if test="null!=provider_owner_id  and ''!= provider_owner_id">
            #{provider_owner_id} ,
        </if>
        <if test="null!=carrier  and ''!= carrier">
            #{carrier} ,
        </if>
        <if test="null!=contract_id  and ''!= contract_id">
            #{contract_id} ,
        </if>
        <if test="null!=coma  and ''!= coma">
            #{coma} ,
        </if>
        <if test="null!=comb  and ''!= comb">
            #{comb} ,
        </if>
        <if test="null!=priority  and ''!= priority">
            #{priority} ,
        </if>
        <if test="null!=start_time  and ''!= start_time">
            #{start_time} ,
        </if>
        <if test="null!=end_time  and ''!= end_time">
            #{end_time} ,
        </if>
        <if test="null!=seller  and ''!= seller">
            #{seller} ,
        </if>
        <if test="null!=shipping_warehouse_id  and ''!= shipping_warehouse_id">
            #{shipping_warehouse_id} ,
        </if>
        <if test="null!=receive  and ''!= receive">
            #{receive} ,
        </if>
        <if test="null!=partial_shipments  and ''!= partial_shipments">
            #{partial_shipments} ,
        </if>
        <if test="null!=remark  and ''!= remark">
            #{remark} ,
        </if>
        <if test="null!=status">
            #{status} ,
        </if>
        <if test="null!=bill_zip  and ''!= bill_zip">
            #{bill_zip} ,
        </if>
        now(),
        #{creator},
        now(),
        #{updator}
        );
        <selectKey resultType="java.lang.String" keyProperty="id">
            SELECT LAST_INSERT_ID() as id
        </selectKey>
    </insert>

    <!-- 删除 -->
    <update id="deleteInfo" parameterType="map">
        UPDATE w_order_sale set is_delete = 'Y' where id = #{id}
    </update>

    <!-- 修改 -->
    <update id="updateInfo" parameterType="map">
        UPDATE w_order_sale a
        set

        <if test="null!=order_no  and ''!= order_no">
            a.order_no = #{order_no} ,
        </if>
        <if test="null!=order_type  and ''!= order_type">
            a.order_type = #{order_type} ,
        </if>
        <if test="null!=provider_id  and ''!= provider_id">
            a.provider_id = #{provider_id} ,
        </if>
        <if test="null!=provider_carrier_id  and ''!= provider_carrier_id">
            a.provider_carrier_id = #{provider_carrier_id} ,
        </if>
        <if test="null!=provider_owner_id  and ''!= provider_owner_id">
            a.provider_owner_id = #{provider_owner_id} ,
        </if>
        <if test="null!=carrier  and ''!= carrier">
            a.carrier = #{carrier} ,
        </if>
        <if test="null!=contract_id  and ''!= contract_id">
            a.contract_id = #{contract_id} ,
        </if>
        <if test="null!=coma  and ''!= coma">
            a.coma = #{coma} ,
        </if>
        <if test="null!=comb  and ''!= comb">
            a.comb = #{comb} ,
        </if>
        <if test="null!=priority  and ''!= priority">
            a.priority = #{priority} ,
        </if>
        <if test="null!=start_time  and ''!= start_time">
            a.start_time = #{start_time} ,
        </if>
        <if test="null!=end_time  and ''!= end_time">
            a.end_time = #{end_time} ,
        </if>
        <if test="null!=seller  and ''!= seller">
            a.seller = #{seller} ,
        </if>
        <if test="null!=shipping_warehouse_id  and ''!= shipping_warehouse_id">
            a.shipping_warehouse_id = #{shipping_warehouse_id} ,
        </if>
        <if test="null!=receive  and ''!= receive">
            a.receive = #{receive} ,
        </if>
        <if test="null!=partial_shipments  and ''!= partial_shipments">
            a.partial_shipments = #{partial_shipments} ,
        </if>
        <if test="null!=remark  and ''!= remark">
            a.remark = #{remark} ,
        </if>
        <if test="null!=status">
            a.status = #{status} ,
        </if>
        <if test="null!=create_time  and ''!= create_time">
            a.create_time = #{create_time} ,
        </if>
        <if test="null!=creator  and ''!= creator">
            a.creator = #{creator} ,
        </if>
        <if test="null!=is_delete  and ''!= is_delete">
            a.is_delete = #{is_delete} ,
        </if>
        <if test="null!=is_delete  and ''!= is_delete">
            a.bill_zip = #{bill_zip} ,
        </if>
        update_time = now(),
        a.updator = #{updator}
        where
        a.id = #{id}
    </update>

    <!-- 列表查询 -->
    <select id="queryList" parameterType="map" resultType="dto">
        SELECT
        a.id,
        a.order_no,
        a.order_type,
        a.provider_id,
        a.provider_carrier_id,
        a.provider_owner_id,
        a.carrier,
        a.contract_id,
        a.coma,
        a.comb,
        a.priority,
        a.start_time,
        a.end_time,
        a.seller,
        a.shipping_warehouse_id,
        a.receive,
        a.partial_shipments,
        a.remark,
        a.status,
        a.create_time
        FROM
        w_order_sale a
        <include refid="sql_where"/>
        <if test="null!=start">
            limit #{start},#{end}
        </if>
    </select>

    <!-- 列表数量查询 -->
    <select id="queryListCount" parameterType="map" resultType="dto">
        SELECT
        count(1) as total
        FROM
        w_order_sale a
        <include refid="sql_where"/>
    </select>

    <!-- 对象查询 -->
    <select id="getInfo" parameterType="map" resultType="dto">
        SELECT
        a.*
        FROM
        w_order_sale a
        <include refid="sql_where"/>
    </select>
</mapper>

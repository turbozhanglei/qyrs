<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- 参数管理手工映射SQL语句 -->
<!-- 参数管理手工映射SQL语句 -->
<mapper namespace="internalAssessment">

    <!-- 列表查询 -->
    <select id="queryList" parameterType="map" resultType="dto">
        SELECT
        plan.plan_no,
        plan.set_time,
        plan.end_time,
        assessment_plan.adate,
        assessment_plan.delay_days
        FROM
        oms_assessment_plan assessment_plan
        left join wms_plan plan on plan.id = assessment_plan.plan_id
        <if test="null!=_plan_no  and ''!= _plan_no">
            and plan.plan_no = #{_plan_no}
        </if>
        <if test="null!=_begin_time">
            and assessment_plan.adate BETWEEN ''
        </if>
        <if test="null!=_begin_time  and ''!= _begin_time">
            and assessment_plan.adate BETWEEN #{_begin_time}
        </if>
        <if test="null!=_end_time">
            and now()
        </if>
        <if test="null!=_end_time  and ''!= _end_time">
            and #{_end_time}
        </if>
        and assessment_plan.is_delete = 'N'
    </select>
</mapper>

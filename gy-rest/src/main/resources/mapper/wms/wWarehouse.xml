<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- 参数管理手工映射SQL语句 -->
<!-- 参数管理手工映射SQL语句 -->
<mapper namespace="wmsWareHouse">


    <sql id="sql_where">
        <if test="null!=id  and ''!= id">
            and a.id = #{id}
        </if>
        <if test="null!=housenumber  and ''!= housenumber">
            and a.ware_number LIKE concat('%', #{housenumber}, '%')
        </if>
        <if test="null!=housename  and ''!= housename">
            and a.name LIKE concat('%',#{housename},'%')
        </if>
        <if test="null!=housecharge_person  and ''!= housecharge_person">
            and a.charge_person LIKE concat('%',#{housecharge_person},'%')
        </if>
    </sql>

    <!-- 查询 -->
    <select id="queryList" parameterType="map" resultType="dto">
        SELECT
        a.*
        FROM
        wms_warehouse a
        WHERE
        1 = 1
        AND a.is_delete = 'N'
        <include refid="sql_where"/>
        ORDER BY id
    </select>

    <!-- 插入 -->
    <insert id="saveInfo" parameterType="dto">
        INSERT wms_warehouse (
        ware_number,
        name,
        square,
        address,
        detail_address,
        charge_person,
        remark,
        create_time,
        creator,
        update_time,
        updator,
        is_delete
        )
        VALUES
        (
        #{ware_number},#{name},#{square},#{address},#{detail_address},#{charge_person},#{remark},now(),#{creator},now(),#{updator},'N'
        )

    </insert>

    <!-- 删除 -->
    <delete id="deleteInfo" parameterType="map">
        UPDATE wms_warehouse set is_delete = 'Y' WHERE id = #{id}
    </delete>

    <!-- 修改 -->
    <update id="updateInfo" parameterType="dto">
        update wms_warehouse
        set
        <if test="null!=number1  and ''!= number1">
            ware_number = #{number1},
        </if>
        <if test="null!=name1  and ''!= name1">
            name = #{name1},
        </if>
        <if test="null!=square1  and ''!= square1">
            square = #{square1},
        </if>
        <if test="null!=address1  and ''!= address1">
            address = #{address1},
        </if>
        <if test="null!=detail_address1  and ''!= detail_address1">
            detail_address = #{detail_address1},
        </if>
        <if test="null!=charge_person1  and ''!= charge_person1">
            charge_person = #{charge_person1},
        </if>
        <if test="null!=remark1  and ''!= remark1">
            remark = #{remark1},
        </if>
        update_time = now(),
        updator = #{updator}
        where id = #{id}
    </update>

    <!-- 查询 -->
    <select id="getInfo" parameterType="map" resultType="dto">
        SELECT
        a.*
        FROM
        wms_warehouse a
        WHERE
        1 = 1
        and a.id=#{id}
        AND a.is_delete = 'N'
        limit 0,1
    </select>
</mapper>
